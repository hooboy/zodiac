!function(e){"use strict";var t;e.matchMedia=e.matchMedia||function(){var t=e.styleMedia||e.media;if(!t){var i=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;i.type="text/css",i.id="matchmediajs-test",n.parentNode.insertBefore(i,n),r="getComputedStyle"in e&&e.getComputedStyle(i,null)||i.currentStyle,t={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return i.styleSheet?i.styleSheet.cssText=t:i.textContent=t,"1px"===r.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}(),e.getComputedStyle=e.getComputedStyle||function(e,t){return this.element=e,this.pseudo=t,this.specialProperties={width:"clientWidth",height:"clientHeight"},this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()})),this.specialProperties[t]?e[this.specialProperties[t]]:e.currentStyle[t]?e.currentStyle[t]:null},this};var i=function(e,t){t="modal__rule--"+(t||"");var i=document.querySelector("head"),n=document.getElementById(t),r=null;n?r=n:(r=document.createElement("style"),r.id=t,i.appendChild(r)),r.styleSheet?r.styleSheet.cssText=e:r.innerHTML=e},n=function(t){if(t&&0!==t.length){var i=e.getComputedStyle(t),n={top:parseInt(i.getPropertyValue("margin-top"),10),left:parseInt(i.getPropertyValue("margin-left"),10),right:parseInt(i.getPropertyValue("margin-right"),10),bottom:parseInt(i.getPropertyValue("margin-bottom"),10)},r={top:parseInt(i.getPropertyValue("padding-top"),10),left:parseInt(i.getPropertyValue("padding-left"),10),right:parseInt(i.getPropertyValue("padding-right"),10),bottom:parseInt(i.getPropertyValue("padding-bottom"),10)};return{width:t.offsetWidth,height:t.offsetHeight,margin:n,padding:r}}},r=function(){if(!t.activeElement)throw new Error("Error: No active modal.");var i,r,o,a,l,m,d=t.activeElement.querySelector(".modal-inner"),p=t.activeElement.querySelector(".modal-content"),c=t.activeElement.querySelector("header"),u=t.activeElement.querySelector(".modal--gallery-caption"),g=t.activeElement.querySelector("footer"),s=0,h=0;if(d.style.width="auto",p.style.maxHeight="none",i=n(p),a=n(g),s=i.margin.left+i.margin.right+i.padding.left+i.padding.right,h=i.margin.top+i.margin.bottom+i.padding.top+i.padding.bottom,c&&(r=n(c),h+=r.margin.top+r.margin.bottom+r.padding.top+r.padding.bottom+r.height),u&&(o=n(u),h+=o.margin.top+o.margin.bottom+o.padding.top+o.padding.bottom+o.height),g&&(a=n(g),h+=a.margin.top+a.margin.bottom+a.padding.top+a.padding.bottom+a.height),i.width>e.innerWidth)for(l=t.activeElement.querySelectorAll("img, video, [data-iframe]"),m=0;m<l.length;m++)l[m].style.maxWidth=e.innerWidth-s-70+"px",l[m].style.maxHeight="100%";if(i.height>e.innerHeight)for(l=t.activeElement.querySelectorAll("img, video, [data-iframe]"),m=0;m<l.length;m++)l[m].style.maxHeight=e.innerHeight-h-70+"px",l[m].style.maxWidth="100%"},o=function(e){var t=e.activeElement.querySelector(".modal-inner"),i=e.activeElement.querySelector("img");t.style&&(t.style.top="0",t.style.left="0",i&&(i.style.maxWidth="100%",i.style.maxHeight="100%"))},a=function(){o(t),window.matchMedia("(min-width: 30em)").matches&&r()},l=function(){var i=e.innerWidth||document.documentElement.clientWidth,n=t.activeElement.querySelector(".modal-inner");return(i-parseInt(e.getComputedStyle(n).getPropertyValue("width"),10))/2},m=function(){var i=e.innerHeight||document.documentElement.clientHeight,n=t.activeElement.querySelector(".modal-inner");return(i-parseInt(e.getComputedStyle(n).getPropertyValue("height"),10))/2},d=function(){var n={top:m(),left:l()},r=t.activeElement.querySelector(".modal-inner"),o=parseInt(e.getComputedStyle(r).getPropertyValue("width"),10);r.style.top=n.top+"px",r.style.left=n.left-20+"px",r.style.marginLeft="20px",r.style.marginRight="20px",i("[data-cssmodal-resize] .modal-close:after {top: "+(n.top-25)+"px !important;margin-right: -"+o/2+"px !important;}",r.id)},p=function(){if(t.activeElement){var e=t.activeElement.getAttribute("data-cssmodal-resize");"true"!==e&&""!==e||(a(),d())}},c=function(e){t=e,t.on("resize",window,p),t.on("cssmodal:show",document,p),t.on("cssmodal:resize",document,p)};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=c:"function"==typeof define&&define.amd?define(["CSSModal"],c):"object"==typeof e&&"object"==typeof e.document&&c(e.CSSModal)}(window);