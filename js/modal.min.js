!function(e,t){"use strict";var n={activeElement:void 0,lastActive:void 0,stackedElements:[],tabbableElements:"a[href], area[href], input:not([disabled]),select:not([disabled]), textarea:not([disabled]),button:not([disabled]), iframe, object, embed, *[tabindex],*[contenteditable]",on:function(e,n,a){var i=0;if("string"!=typeof e)throw new Error("Type error: `event` has to be a string");if("function"!=typeof a)throw new Error("Type error: `callback` has to be a function");if(n)for(n.length||(n=[n]);i<n.length;i++)t?t(n[i]).on(e,a):"addEventListener"in n[i]&&n[i].addEventListener(e,a,!1)},trigger:function(e,n){var a,i={detail:{modal:n}};t?t(document).trigger(e,i):document.createEvent?(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,!1,!1,{modal:n}),document.dispatchEvent(a)):(a=new CustomEvent(e,i),document.dispatchEvent(a))},addClass:function(e,t){e&&!e.className.match(t)&&(e.className+=" "+t)},removeClass:function(e,t){e.className=e.className.replace(t,"").replace("  "," ")},hasClass:function(e,t){return!!e.className.match(t)},setFocus:function(){n.activeElement&&(n.lastActive=document.activeElement,n.activeElement.focus(),n.keepFocus(n.activeElement))},removeFocus:function(){n.lastActive&&n.lastActive.focus()},keepFocus:function(e){var t=[];try{t=e.querySelectorAll(n.tabbableElements)}catch(e){return}var a=n.getFirstElementVisible(t),i=n.getLastElementVisible(t),o=function(e){9===(e.which||e.keyCode)&&(e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.target!==i||e.shiftKey?e.target===a&&e.shiftKey&&(e.preventDefault(),i.focus()):(e.preventDefault(),a.focus()))};n.on("keydown",e,o)},getFirstElementVisible:function(e){var t=e.length;if(n.isElementVisible(e[0]))return e[0];for(var a=1;a<t-1;a++)if(n.isElementVisible(e[a]))return e[a];return null},getLastElementVisible:function(e){var t=e.length,a=e[t-1];if(n.isElementVisible(a))return a;for(var i=t-1;i>=0;i--)if(n.isElementVisible(e[i]))return e[i];return null},isElementVisible:function(e){return!(0===e.offsetWidth&&0===e.offsetHeight)},setActive:function(e){n.addClass(e,"is-active"),n.activeElement=e,n.activeElement.setAttribute("aria-hidden","false"),n.setFocus(e.id),n.trigger("cssmodal:show",n.activeElement)},unsetActive:function(e,t){n.removeClass(document.documentElement,"has-overlay"),n.activeElement&&(n.removeClass(n.activeElement,"is-active"),n.trigger("cssmodal:hide",n.activeElement),n.activeElement.setAttribute("aria-hidden","true"),n.removeFocus(),e&&!t&&n.stackModal(n.activeElement),!e&&n.stackedElements.length>0&&n.unstackModal(),n.activeElement=null)},stackModal:function(e){n.addClass(e,"is-stacked"),n.stackedElements.push(n.activeElement)},unstackModal:function(){var t=n.stackedElements.length,a=n.stackedElements[t-1];n.removeClass(a,"is-stacked"),e.location.hash=a.id,n.stackedElements.splice(t-1,1)},mainHandler:function(t,a){var i,o,l=e.location.hash.replace("#",""),s=0,c=[];if(a&&(l=t.currentTarget.getAttribute("href").replace("#","")),i=document.getElementById(l),-1!==l.indexOf("/")){if(c=l.split("/"),s=c.pop(),l=c.join("/"),!(i=document.getElementById(l)))throw new Error('ReferenceError: element "'+l+'" does not exist!');i.index=1*s}if(i){try{t.preventDefault()}catch(e){t.returnValue=!1}o=i.children[0],o&&o.className.match(/modal-inner/)&&(n.unsetActive(!n.hasClass(i,"is-active"),"false"===i.getAttribute("data-stackable")),n.addClass(document.documentElement,"has-overlay"),n._currentScrollPositionY=e.scrollY,n._currentScrollPositionX=e.scrollX,n.setActive(i),n.activeElement._noHash=a)}else n.unsetActive();return!0},injectIframes:function(){for(var e,t=document.querySelectorAll("[data-iframe-src]"),n=0;n<t.length;n++)e=document.createElement("iframe"),e.src=t[n].getAttribute("data-iframe-src"),e.setAttribute("webkitallowfullscreen",!0),e.setAttribute("mozallowfullscreen",!0),e.setAttribute("allowfullscreen",!0),t[n].appendChild(e)},init:function(){this.on("keyup",document,function(t){var a=e.location.hash.replace("#","");if(27===t.keyCode){if(n.activeElement&&a===n.activeElement.id?e.location.hash="!":n.unsetActive(),n.lastActive)return!1;n.removeFocus()}},!1),this.on("click",document.querySelectorAll("[data-cssmodal-nohash]"),function(e){n.mainHandler(e,!0)}),this.on("click",document.querySelectorAll(".modal-close"),function(e){n.activeElement._noHash&&n.mainHandler(e,!0)}),this.on("hashchange",e,n.mainHandler),this.on("load",e,n.mainHandler),e.onscroll=e.onmousewheel=function(){document.documentElement.className.match(/has-overlay/)&&e.scrollTo(n._currentScrollPositionX,n._currentScrollPositionY)},n.injectIframes()}};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=n:"function"==typeof define&&define.amd?define("CSSModal",[],function(){if(!e.CustomEvent&&!t)throw new Error("This browser doesn't support CustomEvent - please include jQuery.");return n.init(),n}):"object"==typeof e&&"object"==typeof e.document&&(e.CSSModal=n,n.init())}(window,window.jQuery);